<!DOCTYPE html>
<html>
  <head>
    <title>VR Game Editor</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="editorStyles.css" />
    <style>
      body {
        font-family: Arial, sans-serif;
        background-color: #e0e0e0; /* Light grey background */
        color: #333; /* Dark grey text */
        margin: 0;
        padding: 20px;
      }

      .section {
        background-color: #f5f5f5;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
        padding: 20px;
      }

      .section-header {
        display: flex;
        justify-content: space-between;
        cursor: pointer;
      }

      .section-content {
        margin-top: 20px;
      }

      .toolSelection button,
      #generateCode,
      #resetGrid,
      #generateMapCode,
      #resetMapGrid {
        margin-right: 10px;
      }

      .mapGrid {
        display: grid;
        grid-template-columns: repeat(10, 1fr); /* 10x10 grid */
        gap: 2px;
      }

      .mapCell {
        width: 30px;
        height: 30px;
        border: 1px solid #ddd;
        text-align: center;
        vertical-align: middle;
        line-height: 30px;
        cursor: pointer;
      }

      /* Additional styles for your editor UI */
    </style>
    <script type="module" src="./GameEditor/spriteEditor.js" defer></script>
    <script type="module" src="./GameEditor/mapEditor.js" defer></script>
    <script type="module" src="./GameEditor/gameEditor.js" defer></script>
    <script defer>
      document.addEventListener("DOMContentLoaded", () => {
        const headers = document.querySelectorAll(".section-header");

        headers.forEach((header) => {
          header.addEventListener("click", () => {
            const content = header.nextElementSibling;
            content.style.display =
              content.style.display === "none" ? "block" : "none";
          });
        });
      });

      document.addEventListener("DOMContentLoaded", function () {
        const importProjectBtn = document.getElementById("importProjectBtn");
        const importGameDataInput = document.getElementById("importGameData");

        // Add an event listener to the button
        importProjectBtn.addEventListener("click", function () {
          // Trigger the click event on the hidden file input
          importGameDataInput.click();
        });

        importGameDataInput.addEventListener("change", function () {
          const file = this.files[0];
          if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
              // Here you can parse the JSON and do what's needed with it
              const importedGameData = JSON.parse(e.target.result);
              console.log(importedGameData);
              // Update your game's data with the imported data
            };
            reader.readAsText(file);
          }
        });
      });
    </script>
  </head>
  <body>
    <h1>Game Editor</h1>
    <p>Editor functionalities go here...</p>
    <button id="exportProjectBtn">Export Project</button>
    <input
      type="file"
      id="importGameData"
      accept=".json"
      style="display: none"
    />
    <button id="importProjectBtn">Import Project</button>

    <div id="mapEditorSection" class="section">
      <div class="section-header">
        <h2>Map Editor</h2>
        <span>Hide/Show</span>
      </div>
      <div class="section-content">
        <select id="spriteSelector">
          <option value="0">Void</option>
          <!-- Added dynamically inside of script -->
        </select>
        <select id="layerSelector">
          <!-- Added dynamically inside of script -->
        </select>
        <button id="loadMap">Load Map</button>
        <button id="saveMap">Save Map</button>
        <div class="mapGrid"></div>
        <button id="generateMapCode">Generate Map Code</button>
        <button id="resetMapGrid">Reset</button>
        <textarea id="mapCode" rows="10" readonly></textarea>
      </div>
    </div>

    <div id="spriteEditorSection" class="section">
      <div class="section-header">
        <h2>Sprite Editor</h2>
        <span>Hide/Show</span>
      </div>
      <div class="section-content">
        <div class="toolSelection">
          <button id="pen">Pen</button>
          <button id="eraser">Eraser</button>
          <button id="fill">Fill</button>
          <input type="color" id="colorPicker" value="#000000" />
          <input type="text" id="spriteIdInput" placeholder="Sprite ID" />
          <button id="loadSprite">Load Sprite</button>
          <button id="saveSprite">Save Sprite</button>
        </div>
        <div class="grid"></div>
        <button id="generateCode">Generate Sprite Code</button>
        <button id="resetGrid">Reset</button>
        <textarea id="spriteCode" rows="10" readonly></textarea>
      </div>
    </div>

    <button id="toggleButton" onclick="window.location.href='index.html';">
      Switch to Game View
    </button>
  </body>
</html>
